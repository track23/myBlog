(()=>{const e="https://cdn.jsdelivr.net",t=document.getElementById("secondary-toggle"),n=document.getElementById("secondary"),o="undefined"!=typeof window,i=o&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),c=o&&"IntersectionObserver"in window,l="UqKcJNE0cBerSu52yLvC1qVs-gzGzoHsz",a="cUR3tOdrBA0ULbONb8sfOipw";let s=null,d=null,r=null,g=document.getElementsByClassName("loading-bar")[0],m=document.querySelector(".loading-bar>.progress"),u=null;function p(e,t,n){const o=document.createElement("script");o.src=e,t&&(o.onload=t),n&&(o.type="module"),o.async=!0,document.body.appendChild(o)}function h(){i||(d=new Pjax({selectors:["title","#main"],cacheBust:!1,analytics:!1}),foo.pjax=d,document.addEventListener("pjax:send",(function(){var e=20;g.classList.add("loading"),m.style.width=e+"%",clearInterval(u),u=setInterval((function(){(e+=3)>95&&(e=95),m.style.width=e+"%"}),500)})),document.addEventListener("pjax:complete",(function(){clearInterval(u),m.style.width="100%",g.classList.remove("loading"),setTimeout((function(){m.style.width=0}),400),s.update(),("dark"===localStorage.getItem("theme")||(new Date).getHours()>=21||(new Date).getHours()<7||matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.setAttribute("data-theme","dark"),j(),b()})))}function f(){new Valine({el:"#valine",count_el:"#comment-count",lang:"zh-cn",emoticon_url:e+"/gh/track23/blog-static/alu",emoticon_list:["吐.png","喷血.png","狂汗.png","不说话.png","汗.png","坐等.png","献花.png","不高兴.png","中刀.png","害羞.png","皱眉.png","小眼睛.png","中指.png","尴尬.png","瞅你.png","想一想.png","中枪.png","得意.png","肿包.png","扇耳光.png","亲亲.png","惊喜.png","脸红.png","无所谓.png","便便.png","愤怒.png","蜡烛.png","献黄瓜.png","内伤.png","投降.png","观察.png","看不见.png","击掌.png","抠鼻.png","邪恶.png","看热闹.png","口水.png","抽烟.png","锁眉.png","装大款.png","吐舌.png","无奈.png","长草.png","赞一个.png","呲牙.png","无语.png","阴暗.png","不出所料.png","咽气.png","期待.png","高兴.png","吐血倒地.png","哭泣.png","欢呼.png","黑线.png","喜极而泣.png","喷水.png","深思.png","鼓掌.png","暗地观察.png"],app_id:l,app_key:a,placeholder:"Write a Comment",admin_email_hash:"ed69c6079398441b73dbfdbbfc8cd196",max_nest:2,page_size:5})}function y(){const e=document.getElementById("comment");if(!i&&c&&e){let t=new IntersectionObserver((function(e){e[0].isIntersecting&&(f(),t.disconnect(),t=null)}),{threshold:[0]});t.observe(e)}else e&&f()}function b(){1===document.getElementsByClassName("leancloud_visitors").length?function(){const e=document.getElementsByClassName("leancloud_visitors")[0],t=e.getAttribute("id").trim(),n=e.getAttribute("data-flag-title").trim();v(t).then((e=>e.json())).then((e=>{0===e.results.length?function(e,t){const n={title:e,url:t,time:1},o=JSON.stringify(n);return fetch("https://api.leancloud.cn/1.1/classes/Counter?fetchWhenSave=true",{method:"POST",headers:{"Content-Type":"application/json","X-LC-Id":l,"X-LC-Key":a},body:o})}(n,t).then((e=>e.json())).then((e=>{document.getElementById(t).innerText=e.time})):function(e){const t=JSON.stringify({time:{__op:"Increment",amount:1}});return fetch("https://api.leancloud.cn/1.1/classes/Counter/"+e+"?fetchWhenSave=true",{method:"PUT",headers:{"Content-Type":"application/json","X-LC-Id":l,"X-LC-Key":a},body:t})}(e.results[0].objectId).then((e=>e.json())).then((e=>{document.getElementById(t).innerText=e.time}))})).catch((e=>{}))}():document.getElementsByClassName("post-title-link").length>1&&v().then((e=>e.json())).then((e=>{e.results.forEach((e=>{document.getElementById(e.url).innerText=e.time}))})).catch((e=>{}))}function v(e){const t={_method:"GET",_ApplicationId:l,_ApplicationKey:a};if(e)t.keys="time",t.limit=1,t.where={url:e};else{t.keys="time,url";const e=[];document.querySelectorAll(".leancloud_visitors").forEach((function(t){e.push(t.getAttribute("id").trim())})),t.where={url:{$in:e}}}const n=JSON.stringify(t);return fetch("https://api.leancloud.cn/1.1/classes/Counter",{method:"POST",headers:{"Content-Type":"text/plain"},body:n})}function E(){n.classList.toggle("toggle-on")?(t.classList.remove("iconcaidan"),t.classList.add("iconfork"),n.setAttribute("aria-expanded","true")):(t.classList.remove("iconfork"),t.classList.add("iconcaidan"),n.setAttribute("aria-expanded","false"))}function I(e){const t=function(e,t,n=0){return(e+(15-e)*Math.random()).toFixed(n)}(0);document.getElementById("friend-link").href=e[t].url,document.getElementById("friend-name").innerText=e[t].name,document.getElementById("friend-desc").innerText=e[t].description}function j(){Array.isArray(r)?I(r):fetch("/friend.json").then((function(e){return e.json()})).then((function(e){I(e),r=e}))}foo.menuToggle=E,foo.loadValine=y,window.addEventListener("load",(function(){t.onclick=E,document.getElementById("search-form").onsubmit=function(e){const t=document.getElementById("search-input"),n=t.value.trim();null!==n&&""!==n||(e.preventDefault(),t.value="")},document.getElementById("search-input").onblur=function(){document.getElementById("search-input").value=""},document.getElementById("xm").onclick=function(){"dark"===document.documentElement.getAttribute("data-theme")?(document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")):(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark"))},p(e+"/npm/vanilla-lazyload@17.1.3/dist/lazyload.min.js",(function(){s=new LazyLoad({elements_selector:".lazyload"})})),p(e+"/npm/instant.page@5.1.0",!1,!0),p(e+"/npm/pjax@0.2.8/pjax.min.js",h),p(e+"/gh/track23/blog-static/Valine.min.js",y),p(e+"/npm/aplayer@1.10.1/dist/APlayer.min.js",(function(){p(e+"/npm/meting@2.0.1/dist/Meting.min.js")})),j(),b(),window.screen.width>955?(document.getElementById("landlord").style.display="block",p(e+"/gh/track23/blog-static/live2d/js/live2d.js",(function(){loadlive2d("live2d",e+"/gh/track23/blog-static/live2d/model/2/2.json")})),p(e+"/gh/track23/blog-static/live2d/js/message.js")):(document.getElementById("memu").onclick=E,document.getElementById("tagcloud").onclick=E,document.querySelector(".site-title>a").onclick=function(){n.classList.contains("toggle-on")&&E()})}))})();